<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8">
		<script src="buildPlaneDerivative.js"></script>
		<script src="buildPlanePixel.js"></script>
		<script src="buildPlane3dLine.js"></script>
		<script src="build_Fx.js"></script>
        <link rel="stylesheet" href="style.css" type="text/css">
		<title>Графопостроитель-2000</title>
	</head>
	<body>
		<!-- Шапка сайта -->
		<img src="title.png">
	
        <!-- Меню выбора количества переменных -->
        <div id="choose_num_vars"> 
            Выберите тип графика:
            <br><br>
            <button onclick="showGraphFx();">f(x)</button>
            <br><br>
            <button onclick="showMeansChoice();">f(x,y)</button>
        </div>
        
        <!-- Меню выбора способа построения -->
        <div id="choose_means">
            Выберите способ построения графика:
            <br><br>
            <button onclick="showGraphFxyPixel();">По точкам</button>
            <br><br>
            <button onclick="showGraphFxyDer();">По производным</button>
			<br><br>
			<button onclick="showGraphFxy3D();">В пространстве</button>
        </div>
        
        <!-- Построение графика 2-х переменных -->
        <table id="build_graph"> 
            <tr>
                <td>
                    <!-- Область значений Х, шаг по X -->
                    <p class="func_params"> 
                        <b>X &isin; [
                        <input id="val_ax" type="number" class="number_field" autocomplete="off" value="-20">
                        , 
                        <input id="val_bx" type="number" class="number_field" autocomplete="off" value="20">
                        ] 
                        <!-- Шаг по х при построении по точках -->
                        <span id="step_x">
                            Шаг
                            <input id="val_hx" type="number" class="number_field" autocomplete="off" value="0.1" step="0.1"></b>
                        </span>
                    </p>
                    <!-- Область значений Y, шаг по Y -->
                    <p class="func_params"> 
                        <b>Y &isin; [
                        <input id="val_ay" type="number" class="number_field" autocomplete="off" value="-20">
                        , 
                        <input id="val_by" type="number" class="number_field" autocomplete="off" value="20">
                        ] 
                        <!-- Шаг по y при построении по точках -->
                        <span id="step_y">
                            Шаг
                            <input id="val_hy" type="number" class="number_field" autocomplete="off" value="0.1" step="0.1"></b>
                        </span>
                    </p>
                    
                    <!-- Eps и L при построении по производным -->
                    <p id="eps_l">
                        <b>
                        Eps =
                            <input id="val_L" type="number" class="number_field" autocomplete="off" value="0.005" step="0.001">
                        L = 
                            <input id="val_Eps" type="number" class="number_field" autocomplete="off" value="0.05" step="0.01">
                        </b>
                    </p>
                    <!-- Область значений F(x,y) -->
                    <p class="func_params"> 
                        <b>F &isin; [
                        <input id="val_az" type="number" class="number_field" autocomplete="off" value="0">
                        , 
                        <input id="val_bz" type="number" class="number_field" autocomplete="off" value="20">
                        ]
						<!-- Шаг по F(x,y) -->
						<span id="step_f">
							Шаг
							<input id="val_st" type="number" class="number_field" autocomplete="off" value="5.0" step="0.1"></b>
						</span>
                    </p> 
                    <!-- Ввод функции -->
                    <p class="func_params">
                        <b>F(x,y) = 
                        <input id="val_func" type="text" value="x**2+y**2"></b>
                        <input id="build_pixel" type="button" value="Построить" onclick="buildPlanePixel();">
						<input id="build_derivative" type="button" value="Построить" onclick="buildPlaneDerivative();">
						<input id="build_3d" type="button" value="Построить" onclick="buildPlane3dLine();">
                    </p>
                    <br>
					<p id="deriv_annotation">
						<i>Примечания:
						<br> 
						при выбранном шаге = 0, шаг выбирается автоматически;
						<br>
						Eps - погрешность, L - длина шага (по касательной);
						</i> 
					</p>
					<br>					
                    <!-- Кнопка вернуться -->
                    <p> 
                        <button id="return_to_choice" onclick="showGraphChoice();">Вернуться на главную</button>
                    </p>
                </td>
                <td> 
                    <!-- Холст отрисовки графика функции -->
                    <canvas id="space" width="600" height="600"></canvas> 
                </td>
            </tr>
        </table>

		<!-- Построение графика 1-ой переменной -->
        <table id="build_graph_fx"> 
            <tr>
                <td>
                    <!-- Область значений Х, шаг по X -->
                    <p class="func_params"> 
                        <b>X &isin; [
                        <input id="val_start" type="number" class="number_field" autocomplete="off" value="-20">
                        , 
                        <input id="val_stop" type="number" class="number_field" autocomplete="off" value="20">
                        ]
                    </p>
             		
                    <!-- Ввод функции -->
                    <p class="func_params">
                        <b>F(x) = 
                        <input id="val_fx" type="text" value="x"></b>
                        <input id="build_fx" type="button" value="Построить" onclick="build_Fx();">
                    </p>
                    <br>
					<p id="lexer_annotation">
						<i>Описание лексики:
						<br> 
						Фукнция : funciton(val) или  funciton(val,val) или funciton()
						<br>
						Число : [число]
						<br>
						Переменная : x
						<br>
						val : Число или Функция или Переменная
						<br>
						Пробелов быть не должно	
						<br>
						Доступные функции: sin(val), cos(val), tg(val), ctg(val),
						<br>
						arcsin(val), arccos(val), arctg(val), arcctg(val),
						<br>
						abs(val), pow(val,val), plus(val,val), minus(val,val),
						<br>
						mult(val,val), div(val,val), log(val,val), pi(), e()
						</i> 
					</p>
					<br>					
                    <!-- Кнопка вернуться -->
                    <p> 
                        <button id="return_to_choice" onclick="showGraphChoice();">Вернуться на главную</button>
                    </p>
                </td>
                <td> 
                    <!-- Холст отрисовки графика функции -->
                    <canvas id="space_fx" width="600" height="600"></canvas> 
                </td>
            </tr>
        </table>
        
        <script>
            
			let firstRun = true;
			
            // перейти к построению графика F(x)
            function showGraphFx() {
                choose_num_vars.style.display = 'none';
                build_graph_fx.style.display = 'block';
				build_fx.style.display = 'inline';
				lexer_annotation.style.display = 'block';
				resizeCanvas();
            }
            
            // показать меню выбора способа построения 2-х переменных
            function showMeansChoice() {
                choose_num_vars.style.display = 'none';
                choose_means.style.display = 'block';
            }
                        
            function showGraphFxyPixel() {
                choose_means.style.display = 'none';
                build_graph.style.display = 'block';
                eps_l.style.display = 'none';
                step_x.style.display = 'inline';
                step_y.style.display = 'inline';
				build_derivative.style.display = 'none';
				build_3d.style.display = 'none';
				build_pixel.style.display = 'inline';
				step_f.style.display = 'inline';
				deriv_annotation.style.display = 'none';
				val_hx.value = 0.1;
				val_hy.value = 0.1;
				val_bz.value = 20;
				resizeCanvas();
            }
            
            function showGraphFxyDer() {
                choose_means.style.display = 'none';
                build_graph.style.display = 'block';
                eps_l.style.display = 'block';
                step_x.style.display = 'none';
                step_y.style.display = 'none';
				build_derivative.style.display = 'inline';
				build_pixel.style.display = 'none';
				build_3d.style.display = 'none';
				step_f.style.display = 'inline';
				deriv_annotation.style.display = 'block';
				val_hx.value = 0.1;
				val_hy.value = 0.1;
				val_bz.value = 20;
				resizeCanvas();
            }
			
			function showGraphFxy3D() {
				choose_means.style.display = 'none';
				build_graph.style.display = 'block';
				eps_l.style.display = 'none';
                step_x.style.display = 'inline';
                step_y.style.display = 'inline';
				build_derivative.style.display = 'none';
				build_pixel.style.display = 'none';
				build_3d.style.display = 'inline';
				step_f.style.display = 'none';
				deriv_annotation.style.display = 'none';
				val_hx.value = 0.5;
				val_hy.value = 0.5;
				val_bz.value = 400;
				resizeCanvas();
			}
                        
            // вернуться к меню выбора
            function showGraphChoice() {
				space.getContext('2d').clearRect(0, 0, space.width, space.height);
				space_fx.getContext('2d').clearRect(0, 0, space_fx.width, space_fx.height);
                build_graph.style.display = 'none';
				build_graph_fx.style.display = 'none';
                choose_num_vars.style.display = 'block';
                return_to_choice.display = 'none';
            }
			
			function resizeCanvas() {
				if (firstRun) {
					space.width = document.body.clientHeight - 30;
					space.height = document.body.clientHeight - 30;
					space_fx.width = document.body.clientHeight - 30;
					space_fx.height = document.body.clientHeight - 30;
					firstRun = false;
				}
			}

        </script>   
	</body>
</html>
